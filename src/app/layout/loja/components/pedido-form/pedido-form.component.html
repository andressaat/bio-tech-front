<form [formGroup]="pedidoForm">

    <div style="padding-top: 10px;"
         fxLayout="row"
         fxLayout.lt-md="column"
         fxLayoutGap="20px"
         fxLayoutGap.lt-md="0px">

      <mat-form-field class="example-full-width">
        <mat-label>Produtos</mat-label>
        <mat-select #selectedProduct>
            <mat-option *ngFor="let produto of produtos"
                        [value]="produto.id">
              {{produto.nome}} - R$ {{produto.valor}}
            </mat-option>
          </mat-select>
        <!-- <mat-select #selectedExercise>
          <mat-option>-- None --</mat-option>
          <mat-optgroup *ngFor="let group of grupoMuscular"
                        [label]="group.nome">
            <mat-option *ngFor="let exercicio of group.exercicios"
                        [value]="exercicio">
              {{exercicio.nome}}
            </mat-option>
          </mat-optgroup>
        </mat-select> -->
      </mat-form-field>
      <button mat-mini-fab
              color="primary"
              (click)="addItem(selectedProduct.value)"
              aria-label="Example icon button with a delete icon">
        <mat-icon>add</mat-icon>
      </button>
    </div>


    <!-- Tabela -->
    <table mat-table
           [dataSource]="dataSource"
           formArrayName="itens"
           *ngIf="itens.length"
           class="mat-elevation-z8">

      <!-- Conteudo das linhas -->

      <!-- Nome -->
      <ng-container matColumnDef="nome">
        <th mat-header-cell
            *matHeaderCellDef> Nome </th>
        <td mat-cell
            *matCellDef="let element"> {{ element.nome }} </td>
      </ng-container>
      <!-- Nome -->

      <!-- Serie -->
      <ng-container matColumnDef="serie">
        <th mat-header-cell
            *matHeaderCellDef> Serie </th>
        <td mat-cell
            *matCellDef="let element; let rowIndex = index"
            [formGroupName]="getActualIndex(rowIndex)">
          <input matInput
                 type="number"
                 size="2"
                 formControlName="serie">
        </td>
      </ng-container>
      <!-- Serie -->

      <!-- Repetição -->
      <ng-container matColumnDef="repeticao">
        <th mat-header-cell
            *matHeaderCellDef> Repetição </th>
        <td mat-cell
            *matCellDef="let element; let rowIndex = index"
            [formGroupName]="getActualIndex(rowIndex)">
          <input matInput
                 type="number"
                 size="2"
                 formControlName="repeticao">
        </td>
      </ng-container>
      <!-- Repetição -->

      <!-- Carga -->
      <ng-container matColumnDef="carga">
        <th mat-header-cell
            *matHeaderCellDef> Carga KG </th>
        <td mat-cell
            *matCellDef="let element; let rowIndex = index"
            [formGroupName]="getActualIndex(rowIndex)">
          <input matInput
                 type="number"
                 size="2"
                 formControlName="carga">
        </td>
      </ng-container>
      <!-- Carga -->

      <!-- Observações -->
      <ng-container matColumnDef="observacoes">
        <th mat-header-cell
            *matHeaderCellDef> Observações </th>
        <td mat-cell
            *matCellDef="let element; let rowIndex = index"
            [formGroupName]="getActualIndex(rowIndex)">
          <input matInput
                 type="text"
                 formControlName="observacoes">
        </td>
      </ng-container>
      <!-- Observações -->

      <!-- Default Table lines -->
      <tr mat-header-row
          *matHeaderRowDef="displayedColumns; sticky: true"></tr>
      <tr mat-row
          *matRowDef="let row; columns: displayedColumns;"></tr>

      <!-- Group header cells-->
      <ng-container matColumnDef="groupHeader">
        <td colspan="999"
            mat-cell
            *matCellDef="let group">
          <div>
            <!-- <mat-icon *ngIf="!group.reduced">expand_less</mat-icon>
            <mat-icon *ngIf="group.reduced">expand_more</mat-icon> -->
            <strong>{{group.groupName}}</strong>
          </div>
        </td>
      </ng-container>

      <!-- Group line -->
      <tr mat-row
          class="clickable"
          *matRowDef="let row; columns: ['groupHeader']; when: isGroup">
        <!-- PODERIA EXPADIR E CONTRAIR OS GRUPOS, MAS TEM UM BUG no INDEX -->
        <!-- (click)="reduceGroup(row)" -->
      </tr>

    </table>
    <!-- Tabela -->

  </form>